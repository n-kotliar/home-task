{"version":3,"file":"header-C2sMTHIG.js","sources":["../../src/js/localalStorageLogical.js","../../src/js/favourite_exercises.js","../../src/js/rate.js","../../src/js/exercises_card.js","../../src/js/header.js"],"sourcesContent":["export const LS_FAV = 'favouriteExercises';\nconst QUOTE_KEY = 'quote';\nconst QUOTE_TIME_KEY = 'quote_time';\nconst ONE_DAY_MS = 86400000;\n\nexport const setFav = arr => localStorage.setItem(LS_FAV, JSON.stringify(arr));\n\nexport const getFav = key => {\n  try {\n    const data = localStorage.getItem(key);\n    return data ? JSON.parse(data) : [];\n  } catch (err) {\n    console.error('Error parsing JSON:', err.message);\n    return [];\n  }\n};\n\nexport const removeFromFav = id => {\n  const updated = getFav(LS_FAV).filter(item => item._id !== id);\n  setFav(updated);\n};\n\nasync function fetchQuote() {\n  const response = await fetch('https://your-energy.b.goit.study/api/quote');\n  return response.json();\n}\n\nlet quotePromise = null;\n\nasync function getQuote() {\n  if (quotePromise) return quotePromise;\n\n  const storedQuote = localStorage.getItem(QUOTE_KEY);\n  const storedTime = localStorage.getItem(QUOTE_TIME_KEY);\n\n  if (\n    storedQuote &&\n    storedTime &&\n    Date.now() - Number(storedTime) < ONE_DAY_MS\n  ) {\n    return JSON.parse(storedQuote);\n  }\n\n  quotePromise = (async () => {\n    try {\n      const data = await fetchQuote();\n      localStorage.setItem(QUOTE_KEY, JSON.stringify(data));\n      localStorage.setItem(QUOTE_TIME_KEY, Date.now().toString());\n      return data;\n    } catch (err) {\n      console.error('Error fetching quote:', err);\n      return storedQuote\n        ? JSON.parse(storedQuote)\n        : { quote: 'No quote available', author: '' };\n    } finally {\n      quotePromise = null;\n    }\n  })();\n\n  return quotePromise;\n}\n\n\nconst renderQuoteHTML = (quote, author) => `\n  <svg width=\"32\" height=\"32\" class=\"quote-text-icon\">\n    <use href=\"/home-task/icons.svg#icon-run\"></use>\n  </svg>\n  <div>\n    <h3 class=\"main-quote-title\">Quote of the day</h3>\n    <p class=\"main-quote-text\">${quote}</p>\n    <p class=\"main-quote-author\">${author}</p>\n    <svg width=\"24\" height=\"24\" class=\"quote-text-icon-commas\">\n      <use href=\"/home-task/icons.svg#icon-commas\"></use>\n    </svg>\n  </div>\n`;\n\nexport const displayQuote = async quoteContainer => {\n  const { quote, author } = await getQuote();\n  quoteContainer.innerHTML = renderQuoteHTML(quote, author);\n};\n","import handlerStartBtn from './exercises_card.js';\nimport {\n  getFav,\n  removeFromFav,\n  LS_FAV,\n  displayQuote,\n} from './localalStorageLogical.js';\n\nconst refs = {\n  root: document.querySelector('.scrollbar_custom'),\n  quoteContainer: document.querySelector('.quote'),\n};\n\nlet page = 1;\nconst CARDS_PER_PAGE = 8;\n\nconst getCardsByPage = (arr, page) => {\n  const start = (page - 1) * CARDS_PER_PAGE;\n  return arr.slice(start, start + CARDS_PER_PAGE);\n};\n\nconst uniqueIdFilter = (arr = []) => {\n  const ids = new Set();\n  return arr.filter(el => {\n    if (!el?._id || ids.has(el._id)) return false;\n    ids.add(el._id);\n    return true;\n  });\n};\n\nfunction renderNoCards() {\n  refs.root.innerHTML = `\n    <div class=\"no_cards_wrapper-container\">\n      <p class=\"no_cards_wrapper\">\n        It appears that you haven't added any exercises to your favorites yet.\n        To get started, you can add exercises that you like to your favorites\n        for easier access in the future.\n      </p>\n    </div>\n  `;\n}\n\nfunction renderCards(cards) {\n  return `\n    <ul class=\"fav_card_list\">\n      ${cards\n        .map(\n          ({ name, _id, burnedCalories, bodyPart, target, time = 3 }) => `\n          <li class=\"exercise-information\" data-id-card=\"${_id}\">\n            <div class=\"top-nav\">\n              <div>\n                <p class=\"tag\">Workout</p>\n                <button data-action=\"delete\" data-id=\"${_id}\" class=\"trash-btn\">\n                  <svg width=\"16\" height=\"16\" class=\"trash-icon\">\n                    <use href=\"/home-task/icons.svg#icon-trash\"></use>\n                  </svg>\n                </button>\n              </div>\n\n              <button data-action=\"start\" data-id=\"${_id}\" class=\"details-link\">\n                Start\n                <svg width=\"16\" height=\"16\" class=\"arrow-icon\">\n                  <use href=\"/home-task/icons.svg#icon-arrow\"></use>\n                </svg>\n              </button>\n            </div>\n\n            <div class=\"exercise-header\">\n              <svg width=\"24\" height=\"24\">\n                <use href=\"/home-task/icons.svg#icon-run\"></use>\n              </svg>\n              <h2 class=\"exercise-name\">${name}</h2>\n            </div>\n\n            <ul class=\"exercise-details\">\n              <li><span>Burned calories:</span> ${burnedCalories} / ${time} min</li>\n              <li><span>Body part:</span> ${bodyPart}</li>\n              <li><span>Target:</span> ${target}</li>\n            </ul>\n          </li>\n        `\n        )\n        .join('')}\n    </ul>\n  `;\n}\n\nfunction renderPagination(totalPages) {\n  if (totalPages <= 1) return '';\n\n  let html = '<ul class=\"nav-buttons pagination\">';\n\n  const btn = p => `\n    <li>\n      <button class=\"pagination-btn ${p === page ? 'active' : ''}\" data-page=\"${p}\">\n        ${p}\n      </button>\n    </li>\n  `;\n\n  let start = Math.max(1, page - 1);\n  let end = Math.min(totalPages, page + 1);\n\n  if (page === 1) end = Math.min(totalPages, 3);\n  if (page === totalPages) start = Math.max(1, totalPages - 2);\n\n  if (start > 1) {\n    html += btn(1);\n    if (start > 2) html += `<li class=\"dots\">...</li>`;\n  }\n\n  for (let i = start; i <= end; i++) html += btn(i);\n\n  if (end < totalPages) {\n    if (end < totalPages - 1) html += `<li class=\"dots\">...</li>`;\n    html += btn(totalPages);\n  }\n\n  html += '</ul>';\n  return html;\n}\n\nexport function checkStorage() {\n  if (!refs.root) return;\n\n  const favs = uniqueIdFilter(getFav(LS_FAV));\n\n  if (!favs.length) {\n    renderNoCards();\n    return;\n  }\n\n  const totalPages = Math.ceil(favs.length / CARDS_PER_PAGE);\n  if (page > totalPages) page = totalPages;\n\n  const cards = window.innerWidth < 1440 ? getCardsByPage(favs, page) : favs;\n\n  refs.root.innerHTML =\n    renderCards(cards) +\n    (window.innerWidth < 1440 ? renderPagination(totalPages) : '');\n}\n\nrefs.root?.addEventListener('click', e => {\n  const del = e.target.closest('[data-action=\"delete\"]');\n  const start = e.target.closest('[data-action=\"start\"]');\n  const pageBtn = e.target.closest('.pagination-btn');\n\n  if (del) {\n    removeFromFav(del.dataset.id);\n    checkStorage();\n  }\n\n  if (start) {\n    const favs = getFav(LS_FAV);\n    const exercise = favs.find(el => el._id === start.dataset.id);\n    if (exercise) handlerStartBtn(exercise, true, true);\n  }\n\n  if (pageBtn) {\n    page = Number(pageBtn.dataset.page);\n    checkStorage();\n  }\n});\n\nwindow.addEventListener('resize', () => {\n  page = 1;\n  checkStorage();\n});\n\ncheckStorage();\ndisplayQuote(refs.quoteContainer);\n","import { Notify } from 'notiflix';\n\nexport async function addExerciseRatingById(id, { email, rate, comment }) {\n  const url = `https://your-energy.b.goit.study/api/exercises/${id}/rating`;\n  rate = Number(rate);\n\n  const response = await fetch(url, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email,\n      rate,\n      review: comment,\n    }),\n  });\n\n  if (!response.ok) {\n    const errorData = await response.json();\n    throw new Error(errorData.message || 'Rating failed');\n  }\n\n  return response.json();\n}\n\nconst formCloseBtn = document.getElementById('form-close-btn');\nconst backdrop = document.querySelector('.backdrop');\nconst backdropForm = document.querySelector('.backdrop-form');\nconst userEmail = document.querySelector('#user-email');\nconst userComment = document.getElementById('user-comment');\nconst formSendBtn = document.querySelector('.form-send-btn');\nconst ratingWrapper = document.querySelector('.rating-wrapper');\nconst ratingStarValue = document.querySelector('.rating-star-value');\n\nlet exerciseId = null;\n\nconst userFeedback = {\n  rate: 0,\n  email: '',\n  comment: '',\n};\n\nformSendBtn.disabled = false;\n\n\nfunction resetForm() {\n  userEmail.value = '';\n  userComment.value = '';\n  userFeedback.rate = 0;\n  userFeedback.comment = '';\n  userFeedback.email = '';\n\n  ratingStarValue.textContent = '0.0';\n\n  document.querySelectorAll('.rating-star-icons').forEach(icon => {\n    icon.style.fill = 'var(--white-20)';\n  });\n}\n\nfunction closeRateModal() {\n  backdrop.classList.remove('is-open');\n  document.removeEventListener('keydown', onEscCloseRate);\n  if (typeof window.reopenExerciseModal === 'function') {\n    window.reopenExerciseModal();\n  }\n}\n\nfunction onEscCloseRate(event) {\n  if (event.key === 'Escape') {\n    closeRateModal();\n  }\n}\n\nformCloseBtn.addEventListener('click', closeRateModal);\n\nbackdrop.addEventListener('click', event => {\n  if (event.target === backdrop) closeRateModal();\n});\n\nratingWrapper.addEventListener('click', event => {\n  if (!event.target.dataset.id) return;\n\n  const ratingStarIcons = document.querySelectorAll('.rating-star-icons');\n  userFeedback.rate = Number(event.target.dataset.id);\n\n  ratingStarIcons.forEach((icon, index) => {\n    icon.style.fill =\n      index < userFeedback.rate ? 'var(--star-color)' : 'var(--white-20)';\n  });\n\n  ratingStarValue.textContent = `${userFeedback.rate}.0`;\n});\n\nexport function handlerOpenRate(id) {\n  exerciseId = id;\n  backdrop.classList.add('is-open');\n  document.addEventListener('keydown', onEscCloseRate);\n}\n\n\nbackdropForm.addEventListener('submit', handlerAddRate);\n\nasync function handlerAddRate(event) {\n  event.preventDefault();\n\n  userFeedback.email = userEmail.value.trim();\n  userFeedback.comment = userComment.value.trim() || undefined;\n\n  if (!userFeedback.rate) {\n    Notify.failure('Please select a rating');\n    return;\n  }\n\n  if (!userFeedback.email) {\n    Notify.failure('Please enter your email');\n    return;\n  }\n\n  try {\n    await addExerciseRatingById(exerciseId, userFeedback);\n    Notify.success('Your rating has been saved!');\n    resetForm();\n    closeRateModal();\n  } catch (error) {\n    Notify.failure(error.message || 'Something went wrong');\n  }\n}\n","import * as localStorageLogic from './localalStorageLogical';\nimport { checkStorage } from './favourite_exercises';\nimport { handlerOpenRate } from './rate';\n\nconst cardBackdrop = document.querySelector('.exr-card-backdrop');\n\nfunction capitalizeFirstLetter(string) {\n  return `${string.charAt(0).toUpperCase()}${string.slice(1)}`;\n}\n\nfunction onEscClose(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  cardBackdrop.classList.remove('card-is-open');\n  document.body.classList.remove('not-scrollable');\n  document.removeEventListener('keydown', onEscClose);\n}\n\nexport default function handlerStartBtn(\n  exercise,\n  isFav = false,\n  isFavouritePage = false\n) {\n  renderModal(exercise);\n  cardBackdrop.classList.add('card-is-open');\n  document.body.classList.add('not-scrollable');\n  document.addEventListener('keydown', onEscClose);\n}\n\nfunction renderModal(data) {\n  const favs = localStorageLogic.getFav(localStorageLogic.LS_FAV);\n  let isFavourite = favs.some(el => el._id === data._id);\n\n  let rating = data.rating;\n  if (rating % 1 === 0) rating += '.0';\n  rating = parseFloat(rating).toFixed(1);\n\n  const markup = `\n    <div class=\"exr-card-cont\">\n      <button name=\"close\" id=\"close-card\" type=\"button\" class=\"close-card-button\">\n        <svg class=\"close-card-icon\">\n          <use href=\"/home-task/icons.svg#icon-x\"></use>\n        </svg>\n      </button>\n\n      <img src=\"${data.gifUrl}\" alt=\"example-img\" class=\"exr-image\" />\n\n      <div>\n        <h3 class=\"exercise-name\">${capitalizeFirstLetter(data.name)}</h3>\n\n        <div class=\"rating-container\">\n          <ul class=\"star-rating-list\">\n            <li><p class=\"rating-score\">${rating}</p></li>\n            ${'<li><svg class=\"star-rating-icon\" width=\"14\" height=\"14\"><use href=\"/home-task/icons.svg#icon-star\"></use></svg></li>'.repeat(\n              5\n            )}\n          </ul>\n        </div>\n\n        <div class=\"exr-information-container\">\n          <div class=\"exr-info-block\">\n            <p class=\"info-label\">Target</p>\n            <p class=\"exr-info\">${capitalizeFirstLetter(data.target)}</p>\n          </div>\n          <div class=\"exr-info-block\">\n            <p class=\"info-label\">Body Part</p>\n            <p class=\"exr-info\">${capitalizeFirstLetter(data.bodyPart)}</p>\n          </div>\n          <div class=\"exr-info-block\">\n            <p class=\"info-label\">Equipment</p>\n            <p class=\"exr-info\">${capitalizeFirstLetter(data.equipment)}</p>\n          </div>\n          <div class=\"exr-info-block\">\n            <p class=\"info-label\">Popular</p>\n            <p class=\"exr-info\">${data.popularity}</p>\n          </div>\n          <div class=\"exr-info-block\">\n            <p class=\"info-label\">Burned Calories</p>\n            <p class=\"exr-info\">${data.burnedCalories}/${data.time} min</p>\n          </div>\n        </div>\n\n        <p class=\"exr-description\">${data.description}</p>\n\n        <div class=\"buttons-cont\">\n          <button class=\"add-favourite-btn\"></button>\n          <button class=\"give-rating-btn\">Give a rating</button>\n        </div>\n      </div>\n    </div>\n  `;\n\n  cardBackdrop.innerHTML = markup;\n\n  const stars = document.querySelectorAll('.star-rating-icon');\n  for (let i = 0; i < Math.round(data.rating); i++) {\n    stars[i].style.fill = '#eea10c';\n  }\n\n  const addFavBtn = document.querySelector('.add-favourite-btn');\n\n  const updateFavBtn = () => {\n    addFavBtn.innerHTML = isFavourite\n      ? `Remove from\n        <svg class=\"heart-icon\">\n          <use href=\"/home-task/icons.svg#icon-heart\"></use>\n        </svg>`\n      : `Add to favourites\n        <svg class=\"heart-icon\">\n          <use href=\"/home-task/icons.svg#icon-heart\"></use>\n        </svg>`;\n  };\n\n  updateFavBtn();\n\n  addFavBtn.addEventListener('click', () => {\n    const favs = localStorageLogic.getFav(localStorageLogic.LS_FAV);\n\n    if (favs.some(el => el._id === data._id)) {\n      localStorageLogic.removeFromFav(data._id);\n      isFavourite = false;\n    } else {\n      localStorageLogic.setFav([...favs, data]);\n      isFavourite = true;\n    }\n\n    updateFavBtn();\n    checkStorage();\n  });\n\n  document.getElementById('close-card').addEventListener('click', closeModal);\n\n  cardBackdrop.onclick = e => {\n    if (e.target === cardBackdrop) closeModal();\n  };\n\n  document.querySelector('.give-rating-btn').addEventListener('click', () => {\n    closeModal();\n    handlerOpenRate(data._id);\n  });\n}\n","const openMenuButton = document.querySelector('.open-mobile-menu-btn');\nconst closeMenuButton = document.querySelector('.close-mobile-menu-btn');\nconst mobileMenuWrapper = document.querySelector('.mobile-menu-wrapper');\nconst mobileMenu = document.querySelector('.mobile-menu');\nconst navLinkFav = document.querySelector('.header-nav-link-fav');\nconst navLinkHome = document.querySelector('.header-nav-link-home');\n\nconst page = window.PAGE;\n\n\nif (page === 'fav') {\n  navLinkFav.classList.add('active');\n}\nif (page === 'home') {\n  navLinkHome.classList.add('active');\n}\n\nopenMenuButton.addEventListener('click', () => {\n  mobileMenuWrapper.classList.add('is-open');\n  document.body.classList.add('not-scrollable');\n});\n\ncloseMenuButton.addEventListener('click', () => {\n  closeMenu();\n});\n\nmobileMenuWrapper.addEventListener('click', () => {\n  closeMenu();\n});\n\nmobileMenu.addEventListener('click', e => {\n  e.stopPropagation();\n});\n\nfunction closeMenu() {\n  mobileMenuWrapper.classList.remove('is-open');\n  document.body.classList.remove('not-scrollable');\n}\n\n"],"names":["LS_FAV","QUOTE_KEY","QUOTE_TIME_KEY","ONE_DAY_MS","setFav","arr","getFav","key","data","err","removeFromFav","id","updated","item","fetchQuote","quotePromise","getQuote","storedQuote","storedTime","renderQuoteHTML","quote","author","displayQuote","quoteContainer","refs","page","CARDS_PER_PAGE","getCardsByPage","start","uniqueIdFilter","ids","el","renderNoCards","renderCards","cards","name","_id","burnedCalories","bodyPart","target","time","renderPagination","totalPages","html","btn","p","end","i","checkStorage","favs","_a","del","pageBtn","exercise","handlerStartBtn","addExerciseRatingById","email","rate","comment","url","response","errorData","formCloseBtn","backdrop","backdropForm","userEmail","userComment","formSendBtn","ratingWrapper","ratingStarValue","exerciseId","userFeedback","resetForm","icon","closeRateModal","onEscCloseRate","event","ratingStarIcons","index","handlerOpenRate","handlerAddRate","Notify","error","cardBackdrop","capitalizeFirstLetter","string","onEscClose","closeModal","isFav","isFavouritePage","renderModal","isFavourite","localStorageLogic.getFav","localStorageLogic.LS_FAV","rating","markup","stars","addFavBtn","updateFavBtn","localStorageLogic.removeFromFav","localStorageLogic.setFav","e","openMenuButton","closeMenuButton","mobileMenuWrapper","mobileMenu","navLinkFav","navLinkHome","closeMenu"],"mappings":"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"}